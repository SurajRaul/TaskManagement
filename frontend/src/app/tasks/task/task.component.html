<div class="container mt-4 manage-tasks bottom">
  <h1 class="text-center">Manage Tasks</h1>
  
  <div class="input-group mb-3">
    <input 
      type="text" 
      class="form-control" 
      [(ngModel)]="newTaskName" 
      placeholder="New Task Name" 
      aria-label="New Task Name" />
    <button class="btn btn-primary" (click)="createTask()">Create Task</button>
  </div>

  <div class="container mt-4 align-items-center">
    <div class="col" *ngFor="let stage of [0, 1, 2, 3]; let i = index">
      <div class="card mb-3">
        <div class="card-header">
          <h5 class="mb-0">{{ stage === 0 ? 'Backlog' : stage === 1 ? 'ToDo' : stage === 2 ? 'Ongoing' : 'Done' }}</h5>
        </div>
        <div class="card-body">
          <ul class="list-group">
            <li *ngFor="let task of getTasksByStage(i)" class="list-group-item d-flex justify-content-between align-items-center">
              <div> {{ task.name }}</div>
              <div class="d-flex">
                <button class="btn btn-secondary btn-sm me-1" (click)="updateTaskStage(task, 'back')" [disabled]="task.stage === 0">Back</button>
                <button class="btn btn-secondary btn-sm me-1" (click)="updateTaskStage(task, 'forward')" [disabled]="task.stage === 3">Forward</button>
                <button class="btn btn-warning btn-sm me-1" (click)="editTask(task._id,task.name,task.stage)">Edit</button>
                <button class="btn btn-danger btn-sm" (click)="deleteTask(task._id)">Delete</button>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
